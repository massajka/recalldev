---
trigger: always_on
---

# Этот проект пишется по следующий принципам:
- Паттернт MVC, где:
   - src.bot.handlers - это controllers. (Там опеределяются обработчики команд от Телеграм)
   - src.bot.callback - это views. (Там определяются бизнес логика)
   - src.db.models - это models. 
- Паттерн State Machine. Мы используем его для перехода юзера между статусами.
- Перед изменением какого либо файла, ты должен проанализировать этот файл и все связанные с твоим изменением функции и переменные и также исправить их.

Вот весь флоу, который мы должны поддерживать и без всякого другого лишнего (оставив state machine pattern и MVC):

1. Регистрация юзера в базе после его первого запроса
2. Отправка юзеру списка наших технологий
3. Прием от юзера колбэка с выбранной технологией, сохранение ее в базу
4. Отправка юзеру диагностических вопросов после выбора технологии
5. Отправка в ИИ ответов юзера после диагностики
6. Сохранение от ИИ списка вопросов, который он сгенерирует на основе диагностики
7. Отправка этих вопросов юзеру по очередно.
8. Принятие ответа от юзера и отправка этого ответа в ИИ для анализа. Сохранение ответа юзера и ответа ИИ в базе
9. Переход на следующий вопрос и то же самое
10. Так пока не закончатся вопросы. 

На этом пока все

Не используй излишне if/else. Код должен быть читабельным, если в нем присутствует слишком много if/else, значит код усложнился.

Код должен быть МАКСИМАЛЬНО простым, топорным.